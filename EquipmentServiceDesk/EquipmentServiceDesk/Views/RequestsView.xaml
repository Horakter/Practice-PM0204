<Window x:Class="EquipmentServiceDesk.Views.RequestsView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Управление заявками"
        Height="600"
        Width="1000"
        WindowStartupLocation="CenterScreen">

    <Grid Margin="15">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Верхняя панель -->
        <StackPanel Orientation="Horizontal" Margin="0,0,0,15">
            <TextBox Width="200"
                     Margin="0,0,10,0"
                     Text="{Binding NewTitle}"
                     />

            <TextBox Width="300"
                     Margin="0,0,10,0"
                     Text="{Binding NewDescription}"
                     />
            <ComboBox Width="150"
          Margin="0,0,10,0"
          ItemsSource="{Binding StatusFilters}"
          SelectedItem="{Binding SelectedStatusFilter}"/>

            <Button Content="Фильтр"
        Width="100"
        Margin="0,0,10,0"
        Command="{Binding ApplyFilterCommand}"/>

            <Button Content="Добавить"
                    Width="120"
                    Command="{Binding AddRequestCommand}"/>
        </StackPanel>

        <!-- Таблица -->
        <DataGrid Grid.Row="1"
                  ItemsSource="{Binding Requests}"
                  SelectedItem="{Binding SelectedRequest}"
                  AutoGenerateColumns="False"
                  IsReadOnly="False">

            <DataGrid.Resources>
                <Style TargetType="DataGridRow">
                    <Style.Triggers>

                        <DataTrigger Binding="{Binding Status}" Value="Новая">
                            <Setter Property="Background" Value="#FFFDE9"/>
                        </DataTrigger>

                        <DataTrigger Binding="{Binding Status}" Value="В работе">
                            <Setter Property="Background" Value="#E3F2FD"/>
                        </DataTrigger>

                        <DataTrigger Binding="{Binding Status}" Value="Завершена">
                            <Setter Property="Background" Value="#E8F5E9"/>
                        </DataTrigger>

                    </Style.Triggers>
                </Style>
            </DataGrid.Resources>

            <DataGrid.Columns>
                <DataGridTextColumn Header="ID" Binding="{Binding Id}" IsReadOnly="True"/>
                <DataGridTextColumn Header="Название" Binding="{Binding Title}"/>
                <DataGridTextColumn Header="Описание" Binding="{Binding Description}"/>
                <DataGridTextColumn Header="Статус" Binding="{Binding Status}"/>
                <DataGridTextColumn Header="Дата" Binding="{Binding CreatedAt}" IsReadOnly="True"/>
            </DataGrid.Columns>
        </DataGrid>

        <!-- Нижняя панель -->
        <StackPanel Grid.Row="2"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right"
                    Margin="0,15,0,0">

            <Button Content="В работу"
        Width="120"
        Margin="0,0,10,0"
        Command="{Binding ChangeStatusCommand}"
        CommandParameter="В работе"/>

            <Button Content="Завершить"
        Width="120"
        Margin="0,0,10,0"
        Command="{Binding ChangeStatusCommand}"
        CommandParameter="Завершена"/>

            <Button Content="Обновить"
                    Width="120"
                    Margin="0,0,10,0"
                    Command="{Binding UpdateRequestCommand}"/>

            <Button Content="Удалить"
                    Width="120"
                    Margin="0,0,10,0"
                    Command="{Binding DeleteRequestCommand}"/>

            <Button Content="Закрыть"
                    Width="120"
                    Command="{Binding CloseCommand}"/>
        </StackPanel>
    </Grid>
</Window>
